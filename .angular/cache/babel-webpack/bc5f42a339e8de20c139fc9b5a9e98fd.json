{"ast":null,"code":"import { FormControl, Validators } from '@angular/forms';\nimport { CotizacionCereal, PizarraCereal } from '../../models/model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/cotizacion-cereal.service\";\nimport * as i2 from \"src/app/services/mercado.service\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/common\";\n\nfunction CotizacionFormComponent_option_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 21);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngValue\", item_r1.id)(\"selected\", ctx_r0.pizarraData.id_mercado === item_r1.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", item_r1.nombre, \" \");\n  }\n}\n\nexport let CotizacionFormComponent = /*#__PURE__*/(() => {\n  class CotizacionFormComponent {\n    constructor(service, mercadoService, formBuilder) {\n      this.service = service;\n      this.mercadoService = mercadoService;\n      this.formBuilder = formBuilder;\n      this.isLoadingResults = true;\n      this.pizarraData = new PizarraCereal();\n    }\n\n    ngOnInit() {\n      //Default Values\n      let fecha = new Date();\n      let idMercado = \"001\";\n      this.pizarraData.id_mercado = idMercado;\n      this.pizarraData.fecha = fecha;\n      this.populateData(idMercado, fecha);\n      this.createForm();\n    }\n\n    populateData(idMercado, fecha = new Date()) {\n      this.populatePizarra(idMercado);\n      this.mercadoService.findAll().subscribe(res => {\n        this.mercado = res;\n      }, err => {\n        console.log(err);\n      });\n    }\n\n    populatePizarra(idMercado, fecha = new Date()) {\n      this.service.findPizarra(idMercado, fecha).subscribe(res => {\n        this.entity = res;\n        this.transformData(res);\n        this.isLoadingResults = false;\n      }, err => {\n        console.log(err);\n        this.isLoadingResults = false;\n      });\n    }\n\n    createForm() {\n      this.form = this.formBuilder.group({\n        idMercado: new FormControl(this.pizarraData.id_mercado, Validators.required),\n        fecha: new FormControl(this.pizarraData.fecha, Validators.required),\n        soja: new FormControl(this.pizarraData.soja, Validators.min(0)),\n        maiz: new FormControl(this.pizarraData.maiz, Validators.min(0)),\n        trigo: new FormControl(this.pizarraData.trigo, Validators.min(0)),\n        sorgo: new FormControl(this.pizarraData.sorgo, Validators.min(0)),\n        girasol: new FormControl(this.pizarraData.girasol, Validators.min(0))\n      });\n    }\n\n    transformData(data) {\n      var _a, _b, _c, _d, _e;\n\n      this.pizarraData.soja = ((_a = data.find(d => d.idCereal == \"23\")) === null || _a === void 0 ? void 0 : _a.precio) || 0;\n      this.pizarraData.maiz = ((_b = data.find(d => d.idCereal == \"19\")) === null || _b === void 0 ? void 0 : _b.precio) || 0;\n      this.pizarraData.sorgo = ((_c = data.find(d => d.idCereal == \"22\")) === null || _c === void 0 ? void 0 : _c.precio) || 0;\n      this.pizarraData.girasol = ((_d = data.find(d => d.idCereal == \"02\")) === null || _d === void 0 ? void 0 : _d.precio) || 0;\n      this.pizarraData.trigo = ((_e = data.find(d => d.idCereal == \"15\")) === null || _e === void 0 ? void 0 : _e.precio) || 0;\n    }\n\n    onSubmit() {\n      var cotizacion = new CotizacionCereal();\n      cotizacion.idCereal = \"23\";\n      this.form.value;\n      cotizacion.idMercado = this.form.value.idMercado;\n      cotizacion.idMoneda = \"PES\";\n      cotizacion.precio = this.form.value.soja;\n      cotizacion.fecha = this.form.value.fecha;\n      this.service.add(cotizacion).subscribe(); //Maiz\n\n      cotizacion = new CotizacionCereal();\n      cotizacion.idCereal = \"19\";\n      cotizacion.idMercado = this.form.value.idMercado;\n      cotizacion.idMoneda = \"PES\";\n      cotizacion.precio = this.form.value.maiz;\n      cotizacion.fecha = this.form.value.fecha;\n      this.service.add(cotizacion).subscribe(); //Trigo\n\n      cotizacion = new CotizacionCereal();\n      cotizacion.idCereal = \"15\";\n      cotizacion.idMercado = this.form.value.idMercado;\n      cotizacion.idMoneda = \"PES\";\n      cotizacion.precio = this.form.value.trigo;\n      cotizacion.fecha = this.form.value.fecha;\n      this.service.add(cotizacion).subscribe(); //girasol\n\n      cotizacion = new CotizacionCereal();\n      cotizacion.idCereal = \"02\";\n      cotizacion.idMercado = this.form.value.idMercado;\n      cotizacion.idMoneda = \"PES\";\n      cotizacion.precio = this.form.value.girasol;\n      cotizacion.fecha = this.form.value.fecha;\n      this.service.add(cotizacion).subscribe(); //sorgo\n\n      cotizacion = new CotizacionCereal();\n      cotizacion.idCereal = \"22\";\n      cotizacion.idMercado = this.form.value.idMercado;\n      cotizacion.idMoneda = \"PES\";\n      cotizacion.precio = this.form.value.sorgo;\n      cotizacion.fecha = this.form.value.fecha;\n      this.service.add(cotizacion).subscribe();\n    }\n\n  }\n\n  CotizacionFormComponent.ɵfac = function CotizacionFormComponent_Factory(t) {\n    return new (t || CotizacionFormComponent)(i0.ɵɵdirectiveInject(i1.CotizacionCerealService), i0.ɵɵdirectiveInject(i2.MercadoService), i0.ɵɵdirectiveInject(i3.FormBuilder));\n  };\n\n  CotizacionFormComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CotizacionFormComponent,\n    selectors: [[\"app-cotizacion-form\"]],\n    decls: 45,\n    vars: 13,\n    consts: [[3, \"formGroup\", \"ngSubmit\"], [1, \"form-group\", \"row\"], [1, \"col-xs-3\", \"col-lg-3\"], [\"for\", \"idMercado\"], [\"formControlName\", \"idMercado\", \"name\", \"idMercado\", 1, \"form-control\", 3, \"value\", \"valueChange\", \"ngModelChange\"], [3, \"ngValue\", \"selected\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-xs-2\", \"col-lg-2\"], [\"for\", \"fecha\"], [\"formControlName\", \"fecha\", \"id\", \"fecha\", \"placeholder\", \"Fecha\", \"type\", \"date\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"soja\"], [\"formControlName\", \"soja\", \"id\", \"soja\", \"placeholder\", \"Precio Soja\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"maiz\"], [\"id\", \"maiz\", \"formControlName\", \"maiz\", \"placeholder\", \"Precio Maiz\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"trigo\"], [\"id\", \"trigo\", \"formControlName\", \"trigo\", \"placeholder\", \"Precio Trigo\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"sorgo\"], [\"id\", \"sorgo\", \"formControlName\", \"sorgo\", \"placeholder\", \"Precio Sorgo\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"girasol\"], [\"id\", \"girasol\", \"formControlName\", \"girasol\", \"placeholder\", \"Precio Girasol\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"role\", \"button\", \"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"mr-2\"], [\"role\", \"button\", \"href\", \"/controlpanel\", 1, \"btn\", \"btn-primary\"], [3, \"ngValue\", \"selected\"]],\n    template: function CotizacionFormComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\");\n        i0.ɵɵelementStart(1, \"h2\");\n        i0.ɵɵtext(2, \"Pizarra Update\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"form\", 0);\n        i0.ɵɵlistener(\"ngSubmit\", function CotizacionFormComponent_Template_form_ngSubmit_3_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵelementStart(4, \"div\", 1);\n        i0.ɵɵelementStart(5, \"div\", 2);\n        i0.ɵɵelementStart(6, \"label\", 3);\n        i0.ɵɵtext(7, \"Mercado\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"select\", 4);\n        i0.ɵɵlistener(\"valueChange\", function CotizacionFormComponent_Template_select_valueChange_8_listener($event) {\n          return ctx.pizarraData.id_mercado = $event;\n        })(\"ngModelChange\", function CotizacionFormComponent_Template_select_ngModelChange_8_listener($event) {\n          return ctx.populatePizarra($event);\n        });\n        i0.ɵɵtemplate(9, CotizacionFormComponent_option_9_Template, 2, 3, \"option\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"div\", 1);\n        i0.ɵɵelementStart(11, \"div\", 6);\n        i0.ɵɵelementStart(12, \"label\", 7);\n        i0.ɵɵtext(13, \"Fecha\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"input\", 8);\n        i0.ɵɵlistener(\"ngModelChange\", function CotizacionFormComponent_Template_input_ngModelChange_14_listener($event) {\n          return ctx.pizarraData.fecha = $event;\n        });\n        i0.ɵɵpipe(15, \"date\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"div\", 1);\n        i0.ɵɵelementStart(17, \"div\", 6);\n        i0.ɵɵelementStart(18, \"label\", 9);\n        i0.ɵɵtext(19, \"Soja\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"input\", 10);\n        i0.ɵɵlistener(\"ngModelChange\", function CotizacionFormComponent_Template_input_ngModelChange_20_listener($event) {\n          return ctx.pizarraData.soja = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"div\", 1);\n        i0.ɵɵelementStart(22, \"div\", 6);\n        i0.ɵɵelementStart(23, \"label\", 11);\n        i0.ɵɵtext(24, \"Maiz\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"input\", 12);\n        i0.ɵɵlistener(\"ngModelChange\", function CotizacionFormComponent_Template_input_ngModelChange_25_listener($event) {\n          return ctx.pizarraData.maiz = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"div\", 1);\n        i0.ɵɵelementStart(27, \"div\", 6);\n        i0.ɵɵelementStart(28, \"label\", 13);\n        i0.ɵɵtext(29, \"Trigo\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(30, \"input\", 14);\n        i0.ɵɵlistener(\"ngModelChange\", function CotizacionFormComponent_Template_input_ngModelChange_30_listener($event) {\n          return ctx.pizarraData.trigo = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"div\", 1);\n        i0.ɵɵelementStart(32, \"div\", 6);\n        i0.ɵɵelementStart(33, \"label\", 15);\n        i0.ɵɵtext(34, \"Sorgo\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(35, \"input\", 16);\n        i0.ɵɵlistener(\"ngModelChange\", function CotizacionFormComponent_Template_input_ngModelChange_35_listener($event) {\n          return ctx.pizarraData.sorgo = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(36, \"div\", 1);\n        i0.ɵɵelementStart(37, \"div\", 6);\n        i0.ɵɵelementStart(38, \"label\", 17);\n        i0.ɵɵtext(39, \"Girasol\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(40, \"input\", 18);\n        i0.ɵɵlistener(\"ngModelChange\", function CotizacionFormComponent_Template_input_ngModelChange_40_listener($event) {\n          return ctx.pizarraData.girasol = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(41, \"button\", 19);\n        i0.ɵɵtext(42, \"Grabar\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(43, \"a\", 20);\n        i0.ɵɵtext(44, \"Cancelar\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"formGroup\", ctx.form);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"value\", ctx.pizarraData.id_mercado);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.mercado);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.pizarraData.fecha)(\"ngModel\", i0.ɵɵpipeBind2(15, 10, ctx.pizarraData.fecha, \"yyyy-MM-dd\"));\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngModel\", ctx.pizarraData.soja);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.pizarraData.maiz);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.pizarraData.trigo);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.pizarraData.sorgo);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.pizarraData.girasol);\n      }\n    },\n    directives: [i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.SelectControlValueAccessor, i3.NgControlStatus, i3.FormControlName, i4.NgForOf, i3.DefaultValueAccessor, i3.NgSelectOption, i3.ɵNgSelectMultipleOption],\n    pipes: [i4.DatePipe],\n    styles: [\"\"]\n  });\n  return CotizacionFormComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}